# 🫱🏼‍🫲🏽 withfriend

## 개요
개발 인원 : 개인 프로젝트
진행 기간 : 23.08.17 - 진행 중
이커머스 서비스를 구축해보고, 사용 경험을 중점으로 개발 경험을 쌓기 위해 개발을 시작하였습니다. 또한 본 프로젝트를 혼자 힘으로 개발해 개발 근육을 키우는 목적에 있습니다.

## 서비스 요약
withfriend는 이커머스 서비스를 만드는 것을 목적으로, OAuth 2.0 기반의 로그인과 소셜 API 기능을 토대로 카카오톡 친구들과 신뢰할 수 온라인 플리마켓을 제공해 주는 서비스입니다. 서비스 사용자 간 거래를 구현하기 위해 [결제 요청 → 포인트 충전 → 충전된 포인트로 거래 → 포인트 출금] 방식의 기능을 구현하였습니다. 결제 요청은 portone을 통해 구현하였습니다.

## 프로젝트 회고
withfriend 프로젝트의 [개발 회고](https://foreveryoung97.tistory.com/category/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/withfriend)를 남긴 글들을 모아 놓았습니다.

## 프로젝트 아키텍쳐
[프로젝트 아키텍쳐 구조에 관한 회고입니다.](https://foreveryoung97.tistory.com/109)
<img src="https://github.com/Jiggy97/withfriend/assets/79949843/6ed43781-7162-4273-87a3-0b5b460683c2" width="1000" height="600">


## 적용 기술
- Java
- HTML
- CSS
- JavaScript
- SpringBoot
- Spring Data JPA
- MySQL

## Entity Diagram
[entity 설계 및 테이블 설계에 관한 회고입니다.](https://foreveryoung97.tistory.com/110)<br>
본 프로젝트에서 테이블은 User, Payment, Goods, Trade 4개의 테이블로 구성되어 있으며 각 테이블의 역할은 다음과 같습니다.

- user table → 소셜 로그인을 통해 서비스에 접근한 사용자의 정보를 저장해 줍니다.
<img src="https://github.com/Jiggy97/withfriend/assets/79949843/e9e4f421-5240-4633-84c2-466761c92f8a" width="300" height="200">
<br><br>

- payment table → 상품 거래를 위해 point를 충전할 때 성공한 결제 요청에 대한 정보를 담고 있습니다.
<img src="https://github.com/Jiggy97/withfriend/assets/79949843/269efcdc-bb3a-4661-a7c0-638903e39c68" width="300" height="150">
<br><br>

- goods table → 사용자의 등록한 상품에 대한 정보를 담고 있고, 클라이언트를 통해 사용자들에게 테이블 내의 데이터를 기반으로 정보가 제공됩니다.
<img src="https://github.com/Jiggy97/withfriend/assets/79949843/e56fdaef-c897-4766-9e59-cd5023817f31" width="300" height="300">
<br><br>

- trade table → 사용자가 point를 통해 거래한 거래 내역에 대한 정보를 갖고 있습니다.
<img src="https://github.com/Jiggy97/withfriend/assets/79949843/68deb4da-be76-427b-8db9-f22e55ca6031" width="300" height="300">
<br>

  
## 주요 기능
**소셜 로그인과 세션을 통한 토큰 관리**
많은 사용자를 유치하기 위해서는 사용자가 서비스에 진입하는 장벽이 낮아야 한다고 생각합니다. 사용할 서비스 마다 아이디와 비밀번호를 기입하는 회원가입은 사용자에게 불편함을 느끼게 합니다. 이러한 관점에서 본 프로젝는 소셜 로그인을 통해 사용자가 서비스를 이용하는데 불편함을 해소하였습니다. 또한 소셜 로그인시 발급 받는 토큰을 세션을 통헤 관리하여 사용자가 서비스를 이용할 때 필요한 인가 문제를 해결하였습니다.

**친구 목록 불러오기**
본 프로젝트는 평소 중고거래를 할 때, 신뢰할 수 없는 모르는 사람에게서 오는 불안감을 해소 하기 위해 카카오톡 친구들과 신뢰할 수 있는 거래를 할 수 있는 플리마켓 서비스를 제공하는 것이 목적입니다. 그러므로 소셜 로그인을 통해 발급 받은 토큰을 이용해 친구목록을 불러와 데이터베이스에 저장된 상품 중에서 친구로 등록된 상품만 불러와 사용자에게 공유하며 신뢰를 바탕으로 거래할 수 있도록 도와줍니다.

**유저 <-> 유저 간 결제**
중고거래, 플리마켓 등을 온라인으로 구현하기 위해서는 사용자 간 결제 시스템을 구축해야 합니다. 먼저 결제 api를 구현하기 위해 결제 게이트웨이(portone)에서 가맹점을 만들었고, 해당 가맹점을 통해 결제 요청을 처리하였습니다. 본 서비스에서는 사용자가 결제 한 만큼 포인트로 반환해주고, 반환된 포인트를 통해 사용자간 거래를 구현하였습니다.

### 개발 이슈
| 🔥 이슈 | 해결 유무 | 접근 방법 |
| --- | --- | --- |
| 로그인 | o | 처음 소셜 API를 통해서 로그인을 구현 했을 때, 사용자가 로그인한 정보를 어떻게 계속 서버에 제공하지? 라는 고민을 했다. 다양한 정보를 검색하던 중 로그인 시 발급받은 access token을 브라우저 session에 저장하여 api를 호출할 때 인가하는 방법을 찾아냈다.  |
| 사용자 간 거래 | o | 사용자 간 현금 거래를 위해서는 추가적인 라이센스가 필요하다. 이를 해결하기 위해 게임 내에서 게임 머니를 충전하여 아이템을 교환하는 것처럼 본 서비스에도 point를  충전해 거래할 수 있도록 문제를 접근하였다. |
| 회원 탈퇴 | x | 현재 프로젝트에서 구현한 기능은 토큰을 해제하는 기능밖에 존재하지 않습니다. 사용자의 입장에서 탈퇴를 할 때, 관련된 모든 정보를 안전하게 파기 하는 것을 원하기 때문에 해당 기능을 구현 중에 있습니다.|
| 포인트 출금 | x | 현재 사용하고 있는 PG사 에서 사용자에게 송금할 수 있는 api가 존재하지 않아 PG사를 변경해야 할것 같다 |


